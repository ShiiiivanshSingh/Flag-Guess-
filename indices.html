<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flag Guessing Adventure</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      .difficulty-btn {
        padding: 12px 24px;
        font-size: 18px;
        width: 100%;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 12px;
        border: 2px solid transparent;
      }
      .difficulty-btn:hover {
        opacity: 0.8;
        transform: scale(1.05);
      }
      .difficulty-options {
        background-color: white;
        padding: 40px 30px;
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
      .difficulty-container {
        display: grid;
        gap: 15px;
        grid-template-columns: 1fr;
        margin-top: 20px;
      }
      .difficulty-label {
        font-size: 22px;
        font-weight: bold;
        color: #333;
        margin-bottom: 20px;
      }
      .difficulty-btn.easy {
        background-color: #4caf50;
        color: white;
        border-color: #4caf50;
      }
      .difficulty-btn.medium {
        background-color: #ff9800;
        color: white;
        border-color: #ff9800;
      }
      .difficulty-btn.hard {
        background-color: #f44336;
        color: white;
        border-color: #f44336;
      }
      #home-btn-fixed-element {
        font-size: 14px;
        padding: 8px 16px;
        background-color: #ffffff;
        color: #333;
        border: none;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        cursor: pointer;
      }
      #home-btn-fixed-element:hover {
        background-color: #f0f0f0;
      }
      #suggestions {
        position: absolute;
        z-index: 10;
        width: 100%;
        max-height: 150px;
        overflow-y: auto;
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      #suggestions div {
        padding: 8px;
        cursor: pointer;
      }
      #suggestions div:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-blue-500 to-purple-600 min-h-screen flex items-center justify-center"
  >
    <div id="home-btn-fixed" class="fixed top-4 left-4 z-10">
      <button id="home-btn-fixed-element" class="home-btn">Home</button>
    </div>

    <div
      id="landing-page"
      class="w-96 bg-white rounded-xl shadow-2xl p-8 text-center"
    >
      <h1 class="text-3xl font-bold mb-6 text-gray-800">
        üåç Flag Guessing Adventure
      </h1>

      <div class="mb-6">
        <label for="player-name" class="block text-gray-700 mb-2"
          >Enter Your Name</label
        >
        <input
          type="text"
          id="player-name"
          placeholder="What's your name, explorer?"
          class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <button
        id="start-game-btn"
        class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition duration-300 mb-4"
      >
        Start Your Adventure
      </button>
    </div>

    <div id="difficulty-screen" class="hidden mb-6 text-center">
      <div class="difficulty-options">
        <p class="difficulty-label">Choose Difficulty:</p>
        <div class="difficulty-container">
          <button id="easy-btn" class="difficulty-btn easy">Easy</button>
          <button id="medium-btn" class="difficulty-btn medium">Medium</button>
          <button id="hard-btn" class="difficulty-btn hard">Hard</button>
        </div>
      </div>
    </div>

    <div
      id="game-container"
      class="hidden w-full max-w-md bg-white rounded-xl shadow-2xl p-6 text-center"
    >
      <h2 id="player-greeting" class="text-2xl font-bold mb-4">
        Welcome, Player!
      </h2>

      <div class="flex justify-between mb-4">
        <p class="text-sm">Lives: <span id="lives">‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</span></p>
        <p class="text-sm">Score: <span id="score-value">0</span></p>
      </div>

      <p id="difficulty-label" class="text-lg font-semibold mb-2">
        Difficulty: Easy
      </p>

      <div class="mb-4 h-6">
        <p id="hint" class="text-sm text-gray-600"></p>
      </div>

      <div class="mb-6">
        <img
          id="flag-image"
          src=""
          alt="Country Flag"
          class="w-64 h-40 mx-auto object-cover border-2 rounded-lg"
        />
      </div>

      <div class="relative">
        <input
          type="text"
          id="guess"
          placeholder="Enter country name"
          class="w-full p-3 border rounded-lg mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <div
          id="suggestions"
          class="absolute z-10 w-full max-h-40 overflow-y-auto bg-white border rounded-lg shadow-lg"
        ></div>
      </div>

      <button
        id="submit-btn"
        class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition duration-300"
      >
        Submit Guess
      </button>

      <button
        id="skip-flag-btn"
        class="w-full bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 transition duration-300 mt-4"
      >
        Skip Flag (Cost 1 Life)
      </button>

      <p id="result" class="mt-4 text-lg font-semibold"></p>
    </div>

    <div
      id="game-over-screen"
      class="hidden w-96 bg-white rounded-xl shadow-2xl p-8 text-center"
    >
      <h1 class="text-3xl font-bold mb-6 text-gray-800">Game Over!</h1>
      <p>Your final score: <span id="final-score"></span></p>
      <button
        id="restart-btn"
        class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition duration-300 mt-4"
      >
        Restart Game
      </button>
    </div>

  
  
  <script>
    const API_URL = "https://restcountries.com/v3.1/all";
    const DIFFICULTY_LEVELS = {
      easy: { pointMultiplier: 1, minLetters: 2 },
      medium: { pointMultiplier: 2, minLetters: 3 },
      hard: { pointMultiplier: 3, minLetters: 4 },
    };
  
    class FlagGuessingGame {
      constructor() {
        this.countries = [];
        this.currentFlag = null;
        this.score = 0;
        this.lives = 3;
        this.difficulty = "easy";
        this.playerName = "";
        this.roundNumber = 1;
  
        this.elements = {
          landingPage: document.getElementById("landing-page"),
          gameContainer: document.getElementById("game-container"),
          playerNameInput: document.getElementById("player-name"),
          startGameBtn: document.getElementById("start-game-btn"),
          playerGreeting: document.getElementById("player-greeting"),
          flagImage: document.getElementById("flag-image"),
          guessInput: document.getElementById("guess"),
          submitBtn: document.getElementById("submit-btn"),
          skipFlagBtn: document.getElementById("skip-flag-btn"),
          suggestionsContainer: document.getElementById("suggestions"),
          resultElement: document.getElementById("result"),
          scoreElement: document.getElementById("score-value"),
          livesElement: document.getElementById("lives"),
          hintElement: document.getElementById("hint"),
          difficultyScreen: document.getElementById("difficulty-screen"),
          difficultyButtons: {
            easy: document.getElementById("easy-btn"),
            medium: document.getElementById("medium-btn"),
            hard: document.getElementById("hard-btn"),
          },
          difficultyLabel: document.getElementById("difficulty-label"),
          gameOverScreen: document.getElementById("game-over-screen"),
          finalScore: document.getElementById("final-score"),
          restartBtn: document.getElementById("restart-btn"),
          homeBtn: document.getElementById("home-btn-fixed-element"),
        };
  
        this.init();
      }
  
      async init() {
        const res = await fetch(API_URL);
        this.countries = await res.json();
        this.addEventListeners();
      }
  
      addEventListeners() {
        this.elements.startGameBtn.addEventListener("click", () => {
          this.playerName = this.elements.playerNameInput.value.trim();
          if (this.playerName) {
            this.startGame();
          }
        });
  
        this.elements.difficultyButtons.easy.addEventListener("click", () => {
          this.setDifficulty("easy");
        });
  
        this.elements.difficultyButtons.medium.addEventListener("click", () => {
          this.setDifficulty("medium");
        });
  
        this.elements.difficultyButtons.hard.addEventListener("click", () => {
          this.setDifficulty("hard");
        });
  
        this.elements.submitBtn.addEventListener("click", () => {
          this.checkAnswer();
        });
  
        this.elements.skipFlagBtn.addEventListener("click", () => {
          this.skipFlag();
        });
  
        this.elements.restartBtn.addEventListener("click", () => {
          this.resetGame();
        });
  
        this.elements.homeBtn.addEventListener("click", () => {
          window.location.reload();
        });
  
        // Add listener to guessInput for dynamic suggestions
        this.elements.guessInput.addEventListener("input", (e) => {
          this.filterSuggestions(e.target.value);
        });
      }
  
      startGame() {
        this.elements.landingPage.classList.add("hidden");
        this.elements.difficultyScreen.classList.remove("hidden");
      }
  
      setDifficulty(difficulty) {
        this.difficulty = difficulty;
        this.elements.difficultyLabel.textContent = `Difficulty: ${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)}`;
        this.elements.difficultyScreen.classList.add("hidden");
        this.elements.gameContainer.classList.remove("hidden");
        this.startRound();
      }
  
      startRound() {
        this.currentFlag = this.getRandomFlag();
        this.elements.flagImage.src = this.currentFlag.flags.png;
        this.elements.resultElement.textContent = "";
        this.elements.guessInput.value = "";
        this.elements.suggestionsContainer.innerHTML = "";
  
        this.showHint();
      }
  
      getRandomFlag() {
        const randomIndex = Math.floor(Math.random() * this.countries.length);
        return this.countries[randomIndex];
      }
  
      showHint() {
        let hintText = "";
  
        if (this.difficulty === "easy") {
          hintText = `Hint: The capital city of this country is ${this.getCapitalCity(this.currentFlag)}`;
        } else if (this.difficulty === "medium") {
          hintText = `Hint: This country is located in ${this.getContinent(this.currentFlag)}`;
        } else if (this.difficulty === "hard") {
          hintText = `Hint: The capital city is ${this.getCapitalCity(this.currentFlag)} and it is located in ${this.getContinent(this.currentFlag)}`;
        }
  
        this.elements.hintElement.textContent = hintText;
      }
  
      getCapitalCity(country) {
        return country.capital ? country.capital[0] : "an unknown capital";
      }
  
      getContinent(country) {
        return country.region || "an unknown continent";
      }
  
      checkAnswer() {
        const guess = this.elements.guessInput.value.trim().toLowerCase();
        const correctAnswer = this.currentFlag.name.common.toLowerCase();
  
        if (guess === correctAnswer) {
          this.score += DIFFICULTY_LEVELS[this.difficulty].pointMultiplier;
          this.updateScoreAndLives();
          this.roundNumber++;
          this.startRound();
        } else {
          this.lives -= 1;
          this.updateScoreAndLives();
          if (this.lives <= 0) {
            this.endGame();
          } else {
            this.elements.resultElement.textContent = `Incorrect! The correct answer was ${this.currentFlag.name.common}. Try again!`;
          }
        }
      }
  
      skipFlag() {
        this.lives -= 1;
        this.updateScoreAndLives();
        if (this.lives <= 0) {
          this.endGame();
        } else {
          this.roundNumber++;
          this.startRound();
        }
      }
  
      updateScoreAndLives() {
        this.elements.scoreElement.textContent = this.score;
        this.elements.livesElement.textContent = "‚ù§Ô∏è ".repeat(this.lives);
      }
  
      endGame() {
        this.elements.gameContainer.classList.add("hidden");
        this.elements.gameOverScreen.classList.remove("hidden");
        this.elements.finalScore.textContent = `Final Score: ${this.score}`;
      }
  
      resetGame() {
        this.score = 0;
        this.lives = 3;
        this.roundNumber = 1;
        this.updateScoreAndLives();
        this.elements.gameOverScreen.classList.add("hidden");
        this.elements.landingPage.classList.remove("hidden");
      }
  
      filterSuggestions(query) {
        const suggestions = this.countries.filter(country =>
          country.name.common.toLowerCase().includes(query.toLowerCase())
        );
        this.displaySuggestions(suggestions);
      }
  
      displaySuggestions(suggestions) {
        this.elements.suggestionsContainer.innerHTML = "";
        suggestions.forEach((suggestion) => {
          const div = document.createElement("div");
          div.textContent = suggestion.name.common;
          div.addEventListener("click", () => {
            this.elements.guessInput.value = suggestion.name.common;
            this.elements.suggestionsContainer.innerHTML = "";
          });
          this.elements.suggestionsContainer.appendChild(div);
        });
      }
    }
  
    const game = new FlagGuessingGame();
  </script>
  </body>
</html>
